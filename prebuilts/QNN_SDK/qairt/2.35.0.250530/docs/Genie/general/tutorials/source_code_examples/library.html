

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Genie Sample Code Tutorial &mdash; Qualcomm® Gen AI Inference Extensions</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/custom_css.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/collapsible-lists/css/tree_view.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/collapsible-lists/js/CollapsibleLists.compressed.js"></script>
        <script src="../../../_static/collapsible-lists/js/apply-collapsible-lists.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="genie-t2t-run Sample Code Tutorial" href="genie-t2t-run.html" />
    <link rel="prev" title="Source Code Examples" href="source_code_examples.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> Qualcomm® Gen AI Inference Extensions
          

          
          </a>

          
            
            
              <div class="version">
                v2.35.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction/introduction.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../tutorials.html">Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../setup.html">Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dialog/dialog.html">Genie Dialog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../embedding/embedding.html">Genie Embedding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../engine/engine.html">Genie Engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logger/logger.html">Genie Log</a></li>
<li class="toctree-l2"><a class="reference internal" href="../profile/profile.html">Genie Profile</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pipeline/pipeline.html">Genie Pipeline</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="source_code_examples.html">Source Code Examples</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">libGenie.so and Genie.dll</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="#building-the-genie-library">Building the Genie library</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="genie-t2t-run.html">genie-t2t-run</a></li>
<li class="toctree-l3"><a class="reference internal" href="genie-app.html">genie-app</a></li>
<li class="toctree-l3"><a class="reference internal" href="genai_model.html">Gen AI Transformer Model Library</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../support/support.html">Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../library/library.html">Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/tools.html">Tools</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Qualcomm® Gen AI Inference Extensions</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../tutorials.html">Tutorials</a> &raquo;</li>
        
          <li><a href="source_code_examples.html">Source Code Examples</a> &raquo;</li>
        
      <li>Genie Sample Code Tutorial</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="genie-sample-code-tutorial">
<h1>Genie Sample Code Tutorial<a class="headerlink" href="#genie-sample-code-tutorial" title="Permalink to this heading">¶</a></h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Genie source code examples are subject to change without notice.</p>
</div>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this heading">¶</a></h2>
<dl class="simple">
<dt>Building <em>libGenie.so</em> has three external dependencies:</dt><dd><ol class="arabic simple">
<li><p>clang compiler</p></li>
<li><p>ndk-build (for Android targets only)</p></li>
<li><p>RUST</p></li>
</ol>
</dd>
</dl>
<p>If the clang compiler is not available in your system <strong>PATH</strong>, the script
<strong>${QNN_SDK_ROOT}/bin/check-linux-dependency.sh</strong> provided with the SDK
can be used to install and prepare your environment. Alternatively, you could install these
dependencies and make them available in your PATH.</p>
<p>Command to automatically install required dependencies:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>bash<span class="w"> </span><span class="si">${</span><span class="nv">QNN_SDK_ROOT</span><span class="si">}</span>/bin/check-linux-dependency.sh
</pre></div>
</div>
<p>For the second dependency to be satisfied, ndk-build needs to be set, which you can check with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="si">${</span><span class="nv">QNN_SDK_ROOT</span><span class="si">}</span>/bin/envcheck<span class="w"> </span>-n
</pre></div>
</div>
<p><em>Note: libGenie.so has been verified to work with Android NDK version r26c and clang14.</em></p>
<p>For the third dependency, RUST, run the following command in a terminal:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">RUSTUP_HOME</span><span class="o">=</span>&lt;/path/for/rustup&gt;
mkdir<span class="w"> </span>-p<span class="w"> </span><span class="si">${</span><span class="nv">RUSTUP_HOME</span><span class="si">}</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">CARGO_HOME</span><span class="o">=</span>&lt;/path/for/cargo&gt;
mkdir<span class="w"> </span>-p<span class="w"> </span><span class="si">${</span><span class="nv">CARGO_HOME</span><span class="si">}</span>
curl<span class="w"> </span>--proto<span class="w"> </span><span class="s1">&#39;=https&#39;</span><span class="w"> </span>--tlsv1.2<span class="w"> </span>https://sh.rustup.rs<span class="w"> </span>-sSf<span class="w"> </span><span class="p">|</span><span class="w"> </span>sh
<span class="nb">source</span><span class="w"> </span><span class="si">${</span><span class="nv">CARGO_HOME</span><span class="si">}</span>/env
rustup<span class="w"> </span>target<span class="w"> </span>add<span class="w"> </span>aarch64-linux-android
</pre></div>
</div>
<p>To install RUST on Windows, please download &amp; execute the installer from the official website of RUST. The first installation only installs the standard library for your host platform - that is, the architecture and operating system you are presently running.
To compile to other platforms you must install other target platforms.
For example, if you want to build for ARM64, run the following command in the developer command prompt for VS:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rustup<span class="w"> </span>target<span class="w"> </span>add<span class="w"> </span>aarch64-pc-windows-msvc
</pre></div>
</div>
</div>
<div class="section" id="building-the-genie-library">
<h2>Building the Genie library<a class="headerlink" href="#building-the-genie-library" title="Permalink to this heading">¶</a></h2>
<p><strong>x86</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span><span class="si">${</span><span class="nv">SDK_ROOT</span><span class="si">}</span>/examples/Genie/Genie
make<span class="w"> </span>x86
</pre></div>
</div>
<p>After executing make as shown above, you should be able to see libGenie.so in lib/x86_64-linux-clang</p>
<p><strong>Android</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span><span class="si">${</span><span class="nv">SDK_ROOT</span><span class="si">}</span>/examples/Genie/Genie
make<span class="w"> </span>android
</pre></div>
</div>
<p>After executing make as shown above, you should be able to see libGenie.so in lib/aarch64-android
You can now proceed to link this library to your app and call APIs exposed by libGenie.so</p>
<p><strong>Windows</strong></p>
<p>Open the <strong>Developer Command Prompt for Visual Studio</strong> and run the following commands:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span><span class="si">${</span><span class="nv">SDK_ROOT</span><span class="si">}</span>/examples/Genie/Genie

<span class="c1"># If you wish to build for Windows ARM64 platform...</span>
rustup<span class="w"> </span>target<span class="w"> </span>add<span class="w"> </span>aarch64-pc-windows-msvc

mkdir<span class="w"> </span>build<span class="w"> </span><span class="p">&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>build
cmake<span class="w"> </span>../<span class="w"> </span>-A<span class="w"> </span>&lt;x64,<span class="w"> </span>ARM64&gt;
cmake<span class="w"> </span>--build<span class="w"> </span>./<span class="w"> </span>--config<span class="w"> </span>Release
</pre></div>
</div>
<p>You should now be able to see <em>Genie.dll</em> in lib/Release</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="genie-t2t-run.html" class="btn btn-neutral float-right" title="genie-t2t-run Sample Code Tutorial" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="source_code_examples.html" class="btn btn-neutral float-left" title="Source Code Examples" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2024, Qualcomm Technologies, Inc..

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>